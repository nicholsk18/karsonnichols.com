---
import Layout from "@/layouts/Layout.astro";
import Title from "../components/ui/Title.astro";
import Container from "../components/ui/Container.astro";
import { Image } from "astro:assets";
import Line from "@/assets/line.webp";
import Link from "../components/ui/Link.astro";
import type { ImageMetadata } from "astro";
import Reviews from "../components/Reviews.astro";
import AboutHero from "../components/AboutHero.astro";
import Connect from "../components/Connect.astro";
import { getYearsOfExperience } from "../data/siteConfig";

const toolImagesGlob = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/tools/*.{jpeg,jpg,png,svg,gif}",
  { eager: true }
);
const toolImages = Object.values(toolImagesGlob).map((module) => module.default);
---

<Layout
  title="Learn more about Karson Nichols | Software Developer"
  description=`Karson Nichols is a dedicated fullâ€‘stack developer with over ${getYearsOfExperience()} years of experience building web applications using modern frontend frameworks, PHP/Laravel, WordPress, and database technologies. Based in Alabama, he offers affordable, scalable solutions tailored to small businesses and entrepreneurs.`
>
  <AboutHero />

  <Container tag="section" classList="py-10 my-10">
    <div>
      <Title tag="h2" variant="h2">Who am I</Title>
      <Image src={Line} alt="" class="text-center mx-auto pt-2" loading="lazy" />
    </div>

    <div class="flex flex-col md:flex-row gap-20 py-10">
      <div class="flex-1 flex flex-col gap-8">
        <p
          class="transition-all duration-[1500ms] ease-out"
          x-data="{ show: false }"
          x-intersect.once="show = true"
          x-bind:class="show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'"
          x-cloak
        >
          I'm Karson, a software developer based in Alabama with over {getYearsOfExperience()} years
          of experience building web applications. My journey into freelancing, particularly through
          platforms like Upwork, significantly broadened my exposure to diverse tools and development
          setups, truly opening my horizons.
        </p>
        <p
          class="transition-all duration-[1500ms] ease-out"
          x-data="{ show: false }"
          x-intersect.once="show = true"
          x-bind:class="show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'"
          x-cloak
        >
          I thrive on solving complex technical challenges and specialize in helping clients get
          their applications running smoothly again. As a self-starter, I'm constantly honing my
          skills in modern web technologies. My expertise spans across React and Laravel, enabling
          me to build robust and scalable solutions. I'm highly proficient in PHP and have also
          gained valuable experience working with Python and Vue.js.
        </p>
        <p
          class="transition-all duration-[1500ms] ease-out"
          x-data="{ show: false }"
          x-intersect.once="show = true"
          x-bind:class="show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'"
          x-cloak
        >
          Whether you're looking to integrate a new feature into your existing application or need a
          persistent bug squashed, feel free to send me a message. I'd be more than happy to discuss
          your needs and help bring your project to fruition.
        </p>

        <div
          class="mt-4 transition-all duration-[1500ms] ease-out"
          x-data="{ show: false }"
          x-intersect.once="show = true"
          x-bind:class="show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'"
          x-cloak
        >
          <Link to="/contact/" variant="filled" classList="py-3"> Contact Me </Link>
        </div>
      </div>

      <div class="flex-1 flex items-center">
        <div class="w-full">
          <div class="grid grid-cols-3 md:grid-cols-5 gap-4 md:gap-6">
            {
              toolImages.map((src, index) => (
                <div
                  class="tool-card opacity-0 translate-y-4"
                  style={`animation-delay: ${index * 0.05}s;`}
                  x-data="{ show: false }"
                  x-intersect.once="show = true"
                  x-bind:class="show && 'tool-card-visible'"
                >
                  <div class="group relative aspect-square flex items-center justify-center p-3 rounded-xl transition-all duration-300 hover:scale-105">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-base/5 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
                    <Image
                      src={src}
                      alt="tech icon"
                      class="w-full h-full object-contain relative z-10 grayscale-[30%] group-hover:grayscale-0 transition-all duration-300"
                    />
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </div>
    </div>
  </Container>

  <section class="relative py-4">
    <div class="absolute inset-0 backdrop-blur-sm bg-blue-base/5"></div>
    <Container classList="py-20 relative z-10">
      <Title tag="h2" variant="h2">Reviews</Title>
      <Image src={Line} alt="" class="text-center mx-auto pt-2" loading="lazy" />

      <Reviews />
    </Container>
  </section>

  <Connect />

  <style>
    [x-cloak] {
      display: none !important;
    }

    .tool-card-visible {
      opacity: 1 !important;
      transform: translateY(0) !important;
      transition: all 0.5s ease-out;
    }
  </style>
</Layout>
